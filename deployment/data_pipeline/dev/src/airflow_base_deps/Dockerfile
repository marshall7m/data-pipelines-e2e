FROM ${IMAGE_REPO_NAME}:${IMAGE_TAG}

ARG REQUIREMENTS_TXT=""
ENV REQUIREMENTS_TXT=${REQUIREMENTS_TXT}

ARG AIRFLOW_CONSTRAINTS_URL=""
ENV AIRFLOW_CONSTRAINTS_URL=${AIRFLOW_CONSTRAINTS_URL}

RUN if [ -n "${REQUIREMENTS_TXT}" ]; then pip install --user --upgrade pip && \
    pip install --user ${REQUIREMENTS_TXT} \
    --constraint "${AIRFLOW_CONSTRAINTS_URL} "; fi